)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
levels(data$question)
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
) + scale_y_discrete(trans="reverse")
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
) + scale_y_reverse()
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
) + scale_x_reverse()
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)+scale_x_discrete(limits = rev(levels(question)))
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
#### INITIAL COMPUTATIONS
countries <- sort(as.character(unique(pisa[,country_colname])) ) # weź wszystkie kraje i posortuj
countries <- countries[1:1]
data <- changeColnames(data,
oldNames = c(country_colname, results_colname, question_colname),
newNames = c("cnt", "results", "question"))
dataCollapsed <- data %>%
mutate(question = fct_collapse(question,
"(Strongly) Agree"=c("Agree", "Strongly agree"),
"(Strongly) Disagree"=c("Disagree", "Strongly disagree")))
### not elegant part ####
meansPerCountry <- data %>%
group_by(cnt) %>%
summarize(m = mean(results))
meansPerCountry$place <- rank(-meansPerCountry$m) ### rank daje liste rankingowa.
max_rank <- max(meansPerCountry$place)
thisCountryRank <- meansPerCountry %>% filter(cnt==country) %>% select(place) %>% as.numeric
#### TEX ########
########################
### Table of contents
##################
cat("\\begin{frame}[label=toc]
\\frametitle{List of countries}
\\begin{multicols}{4}
\\scriptsize
\\tableofcontents
\\end{multicols}
\\end{frame}")
##################
for(country in countries) {
#### computations for given country ###
# thisCountryBoxplot <-
compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
thisCountryBoxplotMD5 <- asave(thisCountryBoxplot)
thisCountryDensity <- compareDensity(
dataCollapsed, country, "cnt", "results", "question",
question_title, results_title, show_flag2, flags_dir, alpha, legend_position
)
thisCountryDensityMD5 <- asave(thisCountryDensity)
thisCountryRankPlot <- compareRank(country, meansPerCountry)
thisCountryRankPlotMD5 <- asave(thisCountryRankPlot)
### TeX ##########
file1=paste(plotdir, "temp1_", gsub(" ", "", country), ".eps", sep="")
ggsaveInLatexLoop( thisCountryBoxplot,  file1, 7, 4)
file2=paste(plotdir, "temp2_", gsub(" ", "", country), ".eps", sep="")
ggsaveInLatexLoop( thisCountryDensity,  file2, 6, 4)
file3=paste(plotdir, "temp3_", gsub(" ", "", country), ".eps", sep="")
ggsaveInLatexLoop( thisCountryRankPlot, file3, 7, 4)
cat("\\AddButton")
cat("\\section{", country, "}")
cat("\\begin{frame}[t, fragile=singleslide]")
cat("\\frametitle{", country, "}")
cat("\\vspace*{-.4cm}")
cat("\\begin{figure}")
cat("\\begin{minipage}[t]{.52\\textwidth}")
cat("\\centering")
cat("\\includegraphics[width=3.2cm, angle=270]{", file1, "}", sep="")
cat("\\caption*{\\scriptsize
{\\bf Boxplots} of the test score.
The number on the box is the percentage of students within the group.
It is also indicated by the fill.}")
cat("\\vspace{-.4cm}")
cat("\\fontsize{", arepo_fontsize, "}{", 1.2*arepo_fontsize, "}", MD5title(GITusername, GITrepo, thisCountryBoxplotMD5))
cat("\\end{minipage}")
cat("\\begin{minipage}[t]{.44\\textwidth}")
cat("\\centering")
cat("\\includegraphics[width=3.2cm, angle=270]{", file2, "}", sep="")
cat("\\caption*{\\scriptsize
{\\bf Density estimation} of the test score within the groups of
{\\color{red} (strong) likers} and {\\color{blue}(strong) dislikers}.}")
cat("\\vspace{-.4cm}")
cat("\\fontsize{", arepo_fontsize, "}{", 1.2*arepo_fontsize, "}", MD5title(GITusername, GITrepo, thisCountryDensityMD5))
cat("\\end{minipage}")
cat("\\\\")
cat("\\vspace{-2.5cm}")
cat("\\end{figure}")
cat("\\begin{figure}")
cat("\\centering \\includegraphics[width=6.0cm, height=10.0cm, angle=270]{", file3, "}", sep="")
cat("\\vspace{-2.5cm}")
cat("\\caption*{\\scriptsize", country, " mean score is \\ {\\Large\\bf\\color{red}",
thisCountryRank, "} out of ", max_rank, " countries}")
cat("\\vspace*{-.4cm}")
cat("\\fontsize{", arepo_fontsize, "}{", 1.2*arepo_fontsize, "}", MD5title(GITusername, GITrepo, thisCountryDensityMD5))
cat("\\end{figure}")
cat("\\end{frame}")
}
### GIT commit and push
committext <- paste0("cd ", GITrepo, "; git add .; git commit -m \"No message\"")
system(committext)
pushtext <- paste0("cd ", GITrepo, "; git push https://", GITusername, ":",
GITpassword, "@github.com/", GITusername, "/",
GITrepo, ".git --all")
system(pushtext)
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
#### INITIAL COMPUTATIONS
countries <- sort(as.character(unique(pisa[,country_colname])) ) # weź wszystkie kraje i posortuj
countries <- countries[1:1]
data <- changeColnames(data,
oldNames = c(country_colname, results_colname, question_colname),
newNames = c("cnt", "results", "question"))
dataCollapsed <- data %>%
mutate(question = fct_collapse(question,
"(Strongly) Agree"=c("Agree", "Strongly agree"),
"(Strongly) Disagree"=c("Disagree", "Strongly disagree")))
### not elegant part ####
meansPerCountry <- data %>%
group_by(cnt) %>%
summarize(m = mean(results))
meansPerCountry$place <- rank(-meansPerCountry$m) ### rank daje liste rankingowa.
max_rank <- max(meansPerCountry$place)
thisCountryRank <- meansPerCountry %>% filter(cnt==country) %>% select(place) %>% as.numeric
#### TEX ########
########################
### Table of contents
##################
cat("\\begin{frame}[label=toc]
\\frametitle{List of countries}
\\begin{multicols}{4}
\\scriptsize
\\tableofcontents
\\end{multicols}
\\end{frame}")
##################
for(country in countries) {
#### computations for given country ###
# thisCountryBoxplot <- compareBoxplot(
data, country, "cnt", "results", "question",
question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights
)
thisCountryBoxplotMD5 <- asave(thisCountryBoxplot)
thisCountryDensity <- compareDensity(
dataCollapsed, country, "cnt", "results", "question",
question_title, results_title, show_flag2, flags_dir, alpha, legend_position
)
thisCountryDensityMD5 <- asave(thisCountryDensity)
thisCountryRankPlot <- compareRank(country, meansPerCountry)
thisCountryRankPlotMD5 <- asave(thisCountryRankPlot)
### TeX ##########
file1=paste(plotdir, "temp1_", gsub(" ", "", country), ".eps", sep="")
ggsaveInLatexLoop( thisCountryBoxplot,  file1, 7, 4)
file2=paste(plotdir, "temp2_", gsub(" ", "", country), ".eps", sep="")
ggsaveInLatexLoop( thisCountryDensity,  file2, 6, 4)
file3=paste(plotdir, "temp3_", gsub(" ", "", country), ".eps", sep="")
ggsaveInLatexLoop( thisCountryRankPlot, file3, 7, 4)
cat("\\AddButton")
cat("\\section{", country, "}")
cat("\\begin{frame}[t, fragile=singleslide]")
cat("\\frametitle{", country, "}")
cat("\\vspace*{-.4cm}")
cat("\\begin{figure}")
cat("\\begin{minipage}[t]{.52\\textwidth}")
cat("\\centering")
cat("\\includegraphics[width=3.2cm, angle=270]{", file1, "}", sep="")
cat("\\caption*{\\scriptsize
{\\bf Boxplots} of the test score.
The number on the box is the percentage of students within the group.
It is also indicated by the fill.}")
cat("\\vspace{-.4cm}")
cat("\\fontsize{", arepo_fontsize, "}{", 1.2*arepo_fontsize, "}", MD5title(GITusername, GITrepo, thisCountryBoxplotMD5))
cat("\\end{minipage}")
cat("\\begin{minipage}[t]{.44\\textwidth}")
cat("\\centering")
cat("\\includegraphics[width=3.2cm, angle=270]{", file2, "}", sep="")
cat("\\caption*{\\scriptsize
{\\bf Density estimation} of the test score within the groups of
{\\color{red} (strong) likers} and {\\color{blue}(strong) dislikers}.}")
cat("\\vspace{-.4cm}")
cat("\\fontsize{", arepo_fontsize, "}{", 1.2*arepo_fontsize, "}", MD5title(GITusername, GITrepo, thisCountryDensityMD5))
cat("\\end{minipage}")
cat("\\\\")
cat("\\vspace{-2.5cm}")
cat("\\end{figure}")
cat("\\begin{figure}")
cat("\\centering \\includegraphics[width=6.0cm, height=10.0cm, angle=270]{", file3, "}", sep="")
cat("\\vspace{-2.5cm}")
cat("\\caption*{\\scriptsize", country, " mean score is \\ {\\Large\\bf\\color{red}",
thisCountryRank, "} out of ", max_rank, " countries}")
cat("\\vspace*{-.4cm}")
cat("\\fontsize{", arepo_fontsize, "}{", 1.2*arepo_fontsize, "}", MD5title(GITusername, GITrepo, thisCountryDensityMD5))
cat("\\end{figure}")
cat("\\end{frame}")
}
### GIT commit and push
committext <- paste0("cd ", GITrepo, "; git add .; git commit -m \"No message\"")
system(committext)
pushtext <- paste0("cd ", GITrepo, "; git push https://", GITusername, ":",
GITpassword, "@github.com/", GITusername, "/",
GITrepo, ".git --all")
system(pushtext)
labels_order <- c("Strongly disagree", "Disagree", "Agree", "Strongly agree")
data$question
data$question <- ordered(data$question, labels_order)
data$question
aread("LRajkowski/pisa_arepo/e23f9462a8a0bcbee46dc2384d398a51")
library(dplyr)
library(ggplot2)
library(png)
library(grid)
library(forcats)
library(archivist)
mywd <- "/Users/michalfutrega/Downloads/project1-2"
#mywd <- "~/Dropbox/RiWizualizacja/project1"
plotdir <- "plots/"
setwd(mywd)
load("pisa.RData")
load("functions.RData")
# git parameters & archivist
GITusername <- "LRajkowski"
GITpassword <- "temppass100"
GITrepo <- "pisa_arepo"
setLocalRepo(GITrepo)
data <- pisa
country <- "Serbia"
question_colname <- "st29q04"
results_colname <- "pv1math"
country_colname <- "cnt"
question_title <- "I do math because I like it"
results_title <- NULL
show_flag1 <- FALSE
show_flag2 <- TRUE
flags_dir <- paste0(mywd, "/flags/")
alpha <- 3
color_boxes <- TRUE
print_weights <- TRUE
legend_position <- "right"
labels_order <- c("Strongly disagree", "Disagree", "Agree", "Strongly agree")
sub_fontsize <- 5
arepo_fontsize <- 5
LRajkowski/pisa_arepo/b492610ecffcc85f2857ee2a9a33ac2c
aread("LRajkowski/pisa_arepo/b492610ecffcc85f2857ee2a9a33ac2c
")
aread("LRajkowski/pisa_arepo/b492610ecffcc85f2857ee2a9a33ac2c")
source('~/Dropbox/RiWizualizacja/project1/functions1.R', echo=TRUE)
aread("LRajkowski/pisa_arepo/930a55071b82c04641b90bf8c75c3845
")
aread("LRajkowski/pisa_arepo/930a55071b82c04641b90bf8c75c3845")
aread("LRajkowski/pisa_arepo/930a55071b82c04641b90bf8c75c3845")
aread("LRajkowski/pisa_arepo/930a55071b82c04641b90bf8c75c3845")
arepo("LRajkowski/pisa_arepo/930a55071b82c04641b90bf8c75c3845
")
aread("LRajkowski/pisa_arepo/930a55071b82c04641b90bf8c75c3845")
aread("LRajkowski/pisa_arepo/b2618c884c8274e5796f3e6ee5b573e9
")
aread("LRajkowski/pisa_arepo/b2618c884c8274e5796f3e6ee5b573e9")
aread("LRajkowski/pisa_arepo/c814eac7689476bafc97fe70c3dc3f4f")
aread("LRajkowski/pisa_arepo/41d541878cf9ad0f8187aa6965177abe")
aread("LRajkowski/pisa_arepo/41d541878cf9ad0f8187aa6965177abe")
aread("LRajkowski/pisa_arepo/4332f9efc30155d907822e19407b092c")
aread("LRajkowski/pisa_arepo/4332f9efc30155d907822e19407b092c")
install.packages("BetaBit")
proton()
library(BetaBit)
proton()
head(employees)
knitr::opts_chunk$set(echo = TRUE)
employees %>%
filter(name=="John", surname=="Insecure")
employees %>%
filter(name=="John", surname=="Insecure") %>%
select(login)
employees %>%
filter(name=="John", surname=="Insecure") %>%
select(login) -> johnslogin
proton(action="login", login=johnslogin)
proton(action="login", login=johnslogin, password="ABC")
grep("incorrect",proton(action="login", login=johnslogin, password="ABC"))
grep("incorrt",proton(action="login", login=johnslogin, password="ABC"))
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
results <- apply(top1000passwords,
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
results <- sapply(top1000passwords,
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
head(results)
results <- apply(top1000passwords, 1,
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
results <- rapply(top1000passwords, 1,
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
results <- rapply(top1000passwords,
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
head(results)
results <- sapply(as.vector(top1000passwords),
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
results <- sapply(as.vector(top1000passwords),
function(pass){
grep("incorrect",
proton(action="login", login=johnslogin, password=pass))
})
head(results)
head(results)
johnpass <- ""
for(pass in top1000passwords){
if( grep("incorrect", proton(action="login", login=johnslogin, password=pass)) == 1 ){
johnpass <- pass
}
}
grep("a","xyz")
grep("a","xyz")==1
grepl("a","xyz")
johnpass <- ""
for(pass in top1000passwords){
if( grepl("incorrect", proton(action="login", login=johnslogin, password=pass)) ){
johnpass <- pass
}
}
johnpass
proton(action="server", host="XYZ")
head(logs)
logs %>%
group_by(login, host) %>%
summarise( n=n() )
# na poczatku znajdzmy login
employees %>%
filter(surname=="Pietraszko") %>%
select(login)
# na poczatku znajdzmy login
employees %>%
filter(surname=="Pietraszko") %>%
select(login) -> pietraszkologin
# teraz gdzie sie loguje
logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login=pietraszkologin )
# teraz gdzie sie loguje
logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login==pietraszkologin )
# na poczatku znajdzmy login
employees %>%
filter(surname=="Pietraszko") %>%
select(login) -> pietraszkologin
# teraz gdzie sie loguje
logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login==pietraszkologin[1] )
pietraszkologin
pietraszkologin[1]
logs %>%
group_by(login, host) %>%
summarise( n=n() )
# teraz gdzie sie loguje
logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login=="slap" )
# teraz gdzie sie loguje
logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login=="slap" ) %>%
arrange(desc(n))
# teraz gdzie sie loguje
logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login=="slap" ) %>%
arrange(desc(n)) %>%
select(host) %>%
head(1)
# teraz gdzie sie loguje
pietraszkologins <- logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login=="slap" ) %>%
arrange(desc(n)) %>%
select(host) %>%
head(1)
pietraszkologins$host
# teraz gdzie sie loguje
pietraszkologins <- logs %>%
group_by(login, host) %>%
summarise( n=n() ) %>%
filter( login=="slap" ) %>%
arrange(desc(n)) %>%
select(host) %>%
head(1)
pietraszkologins$host
bestserver <- as.character(pietraszkologins$host)
bestserver
proton(action="server", host=bestserver)
head(bash_history)
str(bash_history)
grepl("^[a-z]"," dfdsfds")
grepl("^[a-z]","dfdsfds")
sum(grepl("^[a-z]", bash_history))
sum(grepl("^ ", bash_history))
bash_history[1:100]
bash_history[1:1000]
# jakie sa komendy?
sum(grepl(" ", bash_history))
# jakie sa komendy?
sum(1-grepl(" ", bash_history))
# jakie sa komendy?
bash_history[!grepl(" ", bash_history)]
# jakie sa komendy?
table(bash_history[!grepl(" ", bash_history)])
# jakie sa komendy?
podejrzane <- table(bash_history[!grepl(" ", bash_history)])
sort(podejrzane)
sort(podejrzane)[1]
names(sort(podejrzane)[1])
haslopietraszka <- names(sort(podejrzane)[1])
proton(action="server", host=bestserver)
proton(action="server", login="slap", password=haslopietraszka)
proton(action="login", login="slap", password=haslopietraszka)
pietraszkologin
aread("LRajkowski/pisa_arepo/4332f9efc30155d907822e19407b092c")
aread("LRajkowski/pisa_arepo/4332f9efc30155d907822e19407b092c")
aread("4332f9efc30155d907822e19407b092c")
