{
    "collab_server" : "",
    "contents" : "\\documentclass{beamer}\n\\usepackage{graphicx}\n\\usepackage{multicol}\n\\usepackage{tikz}\n\\usepackage{caption}\n\\setbeamertemplate{caption}{\\raggedright\\insertcaption\\par}\n\\usepackage[font={small}]{caption}\n\\usetheme{Madrid}\n\\usecolortheme{default}\n\n\\setbeamertemplate{caption}[default]\n\\makeatletter\n\\setbeamertemplate{frametitle}\n{\n    \\ifbeamercolorempty[bg]{frametitle}{}{\\nointerlineskip}\n    \\@tempdima=\\textwidth\n    \\advance\\@tempdima by\\beamer@leftmargin\n    \\advance\\@tempdima by\\beamer@rightmargin\n    \\vskip1ex\n    \\begin{beamercolorbox}[sep=8pt,center,colsep=-4bp,rounded=true]{frametitle}\n        \\usebeamerfont{frametitle}\n        \\vbox{}\\vskip-1ex\n        \\if@tempswa\\else\\csname beamer@ftecenter\\endcsname\\fi\n        \\strut\\insertframetitle\\strut\\par\n        {\n            \\ifx\\insertframesubtitle\\@empty\n            \\else\n            {\\usebeamerfont{framesubtitle}\\usebeamercolor[fg]{framesubtitle}\\insertframesubtitle\\strut\\par}%\n            \\fi\n        }\n        \\vskip-1ex\n        \\if@tempswa\\else\\vskip-.3cm\\fi\n    \\end{beamercolorbox}\n}\n\\makeatother\n\n\\setbeamertemplate{caption}{\\raggedright\\insertcaption\\par}\n\\title{I love math but does she love me?}\n\\subtitle{The analysis of PISA 2012 data set. We investigate the correlation between liking mathematics and test scores.}\n\\author[M. Futrega, \\L. Rajkowski]{Micha\\l\\ Futrega and \\L ukasz Rajkowski}\n\\institute[MIM UW]{Faculty of Mathematics, University of Warsaw}\n\\date{\\today}\n\n\n\\setbeamertemplate{section in toc}{\\inserttocsectionnumber.~\\inserttocsection}\n\\beamertemplatenavigationsymbolsempty\n\n\\newcommand\\AddButton{\n\\setbeamertemplate{background canvas}{\n\\begin{tikzpicture}[remember picture,overlay]\n\\node[anchor=west] at ([yshift=20pt,xshift=1em]current page.south west)\n  {\\hyperlink{toc}{\\beamergotobutton{Table of contests}}};\n\\end{tikzpicture}\n  }\n}\n\n\\begin{document}\n%%% title page %%%\n\\begin{frame}\n    \\titlepage\n    \\center{We have observed that country where liking mathematics goes hand in hand with test results is ranked higher than country where there is no such correlation. We use archivist so you can easily download any of plots.}\n\\end{frame}\n\n\\SweaveOpts{concordance=TRUE}\n<<echo=FALSE>>=\nif (!require(\"pacman\")){\n    install.packages(\"pacman\")\n    library(pacman)\n}\npacman::p_load(dplyr, ggplot2, png, grid, forcats, archivist)\n\n# mywd <- \"/Users/michalfutrega/Downloads/project1-2\"\nmywd <- \"~/Dropbox/RiWizualizacja/project1\"\nplotdir <- \"plots/\"\nsetwd(mywd)\nload(\"pisa.RData\")\nload(\"functions.RData\")\n \n# git parameters & archivist\nGITusername <- \"LRajkowski\"\nGITpassword <- \"temppass100\"\nGITrepo <- \"pisa_arepo\"\nsetLocalRepo(GITrepo)\n\n    \ndata <- pisa\ncountry <- \"Serbia\"\nquestion_colname <- \"st29q04\"\nresults_colname <- \"pv1math\"\ncountry_colname <- \"cnt\"\nquestion_title <- \"I do math because I like it\"\nresults_title <- NULL\nshow_flag1 <- FALSE\nshow_flag2 <- TRUE\nflags_dir <- paste0(mywd, \"/flags/\")\nalpha <- 3\ncolor_boxes <- TRUE\nprint_weights <- TRUE\nlegend_position <- \"right\"\nlabels_order <- c(\"Strongly disagree\", \"Disagree\", \"Agree\", \"Strongly agree\")\nsub_fontsize <- 5\narepo_fontsize <- 5\n@\n\n<<results=tex,echo=FALSE>>=\n#### INITIAL COMPUTATIONS\ncountries <- sort(as.character(unique(pisa[,country_colname])) ) # weÅº wszystkie kraje i posortuj\ndata <- changeColnames(data,\n                 oldNames = c(country_colname, results_colname, question_colname),\n                 newNames = c(\"cnt\", \"results\", \"question\"))\ndata$question <- ordered(data$question, labels_order)\n\ndataCollapsed <- data %>% \n    mutate(question = fct_collapse(question, \n                           \"(Strongly) Agree\"=c(\"Agree\", \"Strongly agree\"),\n                         \"(Strongly) Disagree\"=c(\"Disagree\", \"Strongly disagree\")))\n\n### not elegant part ####\nmeansPerCountry <- data %>% \n    group_by(cnt) %>% \n    summarize(m = mean(results))\n\nmeansPerCountry$place <- rank(-meansPerCountry$m) ### rank daje liste rankingowa.\nmax_rank <- max(meansPerCountry$place)\n\n\n#### TEX ########\n########################\n### Table of contents\n##################\ncat(\"\\\\begin{frame}[label=toc] \n\\\\frametitle{List of countries} \n\\\\begin{multicols}{4}\n\\\\scriptsize\n\\\\tableofcontents\n\\\\end{multicols}\n\\\\end{frame}\")\n\n\n#### A bit o GIT again \ncommittext <- paste0(\"cd \", GITrepo, \"; git pull\")\n\nfor(country in countries[1]){\n    #### computations for given country ###\n    thisCountryBoxplot <- compareBoxplot(\n            data, country, \"cnt\", \"results\", \"question\",\n            question_title, results_title, show_flag1, flags_dir, alpha, color_boxes, print_weights\n    )\n    thisCountryBoxplotMD5 <- asave(thisCountryBoxplot)\n    thisCountryDensity <- compareDensity(\n            dataCollapsed, country, \"cnt\", \"results\", \"question\",\n            question_title, results_title, show_flag2, flags_dir, alpha, legend_position\n    )\n    thisCountryDensityMD5 <- asave(thisCountryDensity)\n    thisCountryRankPlot <- compareRank(country, meansPerCountry) \n    thisCountryRankPlotMD5 <- asave(thisCountryRankPlot)\n    \n    ### TeX ##########\n    file1=paste(plotdir, \"temp1_\", gsub(\" \", \"\", country), \".eps\", sep=\"\")\n    ggsaveInLatexLoop( thisCountryBoxplot,  file1, 7, 4)\n    \n    file2=paste(plotdir, \"temp2_\", gsub(\" \", \"\", country), \".eps\", sep=\"\")\n    ggsaveInLatexLoop( thisCountryDensity,  file2, 6, 4)\n    \n    file3=paste(plotdir, \"temp3_\", gsub(\" \", \"\", country), \".eps\", sep=\"\")\n    ggsaveInLatexLoop( thisCountryRankPlot, file3, 7, 4)\n\n    thisCountryRank <- meansPerCountry %>% filter(cnt==country) %>% select(place) %>% as.numeric\n    cat(\"\\\\AddButton\")\n    cat(\"\\\\section{\", country, \"}\")\n    cat(\"\\\\begin{frame}[t, fragile=singleslide]\")\n    cat(\"\\\\frametitle{\", country, \"}\")\n    \n    cat(\"\\\\vspace*{-.4cm}\")\n    cat(\"\\\\begin{figure}\")\n    cat(\"\\\\begin{minipage}[t]{.52\\\\textwidth}\")\n    cat(\"\\\\centering\")\n    cat(\"\\\\includegraphics[width=3.2cm, angle=270]{\", file1, \"}\", sep=\"\")\n    cat(\"\\\\caption*{\\\\scriptsize \n        {\\\\bf Boxplots} of the test score.\n        The number on the box is the percentage of students within the group.\n        It is also indicated by the fill.}\")\n    cat(\"\\\\vspace{-.4cm}\")\n    cat(\"\\\\fontsize{\", arepo_fontsize, \"}{\", 1.2*arepo_fontsize, \"}\", MD5title(GITusername, GITrepo, thisCountryBoxplotMD5))\n    cat(\"\\\\end{minipage}\")\n    cat(\"\\\\begin{minipage}[t]{.44\\\\textwidth}\")\n    cat(\"\\\\centering\")\n    cat(\"\\\\includegraphics[width=3.2cm, angle=270]{\", file2, \"}\", sep=\"\")\n    cat(\"\\\\caption*{\\\\scriptsize \n        {\\\\bf Density estimation} of the test score within the groups of \n        {\\\\color{red} (strong) likers} and {\\\\color{blue}(strong) dislikers}.}\")\n    cat(\"\\\\vspace{-.4cm}\")\n    cat(\"\\\\fontsize{\", arepo_fontsize, \"}{\", 1.2*arepo_fontsize, \"}\", MD5title(GITusername, GITrepo, thisCountryDensityMD5))\n    cat(\"\\\\end{minipage}\")\n    cat(\"\\\\\\\\\")\n    cat(\"\\\\vspace{-2.5cm}\")\n    cat(\"\\\\end{figure}\")\n    \n    cat(\"\\\\begin{figure}\")\n    cat(\"\\\\centering \\\\includegraphics[width=6.0cm, height=10.0cm, angle=270]{\", file3, \"}\", sep=\"\")\n    cat(\"\\\\vspace{-2.5cm}\")\n    cat(\"\\\\caption*{\\\\scriptsize\", country, \" mean score is \\\\ {\\\\Large\\\\bf\\\\color{red}\",  \n        thisCountryRank, \"} out of \", max_rank, \" countries}\")\n    cat(\"\\\\vspace*{-.4cm}\")\n    cat(\"\\\\fontsize{\", arepo_fontsize, \"}{\", 1.2*arepo_fontsize, \"}\", MD5title(GITusername, GITrepo, thisCountryDensityMD5))\n    cat(\"\\\\end{figure}\")\n    cat(\"\\\\end{frame}\")\n    \n}\n\n### GIT commit and push\ncommittext <- paste0(\"cd \", GITrepo, \"; git add .; git commit -m \\\"No message\\\"\")\nsystem(committext)\npushtext <- paste0(\"cd \", GITrepo, \"; git push https://\", GITusername, \":\",\n       GITpassword, \"@github.com/\", GITusername, \"/\",\n       GITrepo, \".git --all\")\nsystem(pushtext)\n@\n\n\\end{document}",
    "created" : 1509908055561.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3188434818",
    "id" : "ABA5380E",
    "lastKnownWriteTime" : 1509903103,
    "last_content_update" : 1509903103,
    "path" : "~/Dropbox/RiWizualizacja/project1/report_backup.Rnw",
    "project_path" : "report_backup.Rnw",
    "properties" : {
        "marks" : "<:0,0\n>:0,0"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "sweave"
}